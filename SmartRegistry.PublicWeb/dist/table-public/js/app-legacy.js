(function(){"use strict";var e={9247:function(e,t,r){r(6992),r(8674),r(9601),r(7727);var a=r(8935),n=r(9018),i=r.n(n),s=r(2196),l=r.n(s),o=r(6166),u=r.n(o),c=r(6762),d=r(5011),m=r(8262),p=r(3266),f=r(6016),b=r.n(f),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.hasFilterData?r("div",{staticClass:"row mb-4 filter"},[e._l(e.filterData,(function(t){return r("div",{key:t.name,staticClass:"col"},["checkbox"!==t.type?r("label",{staticClass:"form-label",attrs:{for:t.name}},[e._v(" "+e._s(t.label)+" ")]):e._e(),"password"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control input-password",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0,!0)]:e._e(),"number"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,min:t.min,max:t.max,step:t.step,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"date"===t.type?[r("datetime",{attrs:{format:"dd MMM yyyy","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"datetime"===t.type?[r("datetime",{attrs:{format:"dd MMM yyyy HH:mm a","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"paragraph"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,readOnly:"true",required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"text"===t.type?["checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(r){var a=t.value,n=r.target,i=!!n.checked;if(Array.isArray(a)){var s=null,l=e._i(a,s);n.checked?l<0&&e.$set(t,"value",a.concat([s])):l>-1&&e.$set(t,"value",a.slice(0,l).concat(a.slice(l+1)))}else e.$set(t,"value",i)}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(r){return e.$set(t,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:t.type},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"textarea"===t.type?[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,rows:t.rows,cols:t.cols,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"checkbox"===t.type?[r("b-form-checkbox",{attrs:{id:t.name,name:t.name,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}},[e._v(" "+e._s(t.label)+" ")])]:e._e(),"select"===t.type?[r("multiselect",{attrs:{options:t.options,searchable:!0,"show-labels":!0,label:"label","track-by":"label",required:t.required,disabled:!t.enabled},model:{value:t.selectedValue,callback:function(r){e.$set(t,"selectedValue","string"===typeof r?r.trim():r)},expression:"filter.selectedValue"}})]:e._e(),"selectsearch"===t.type?[r("multiselect",{attrs:{options:t.options,label:"label","track-by":"label","preserve-search":!0,"reset-after":!1,"group-values":"groupOptions","group-label":"label",required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"multiselect"===t.type?[r("multiselect",{attrs:{options:t.options,multiple:!0,"close-on-select":!1,"preserve-search":!0,label:"label","track-by":"label","reset-after":!1,"group-values":"groupOptions","group-label":"label","group-select":!0,"hide-selected":!0,required:t.required,disabled:!t.enabled},model:{value:t.selectedValues,callback:function(r){e.$set(t,"selectedValues",r)},expression:"filter.selectedValues"}})]:e._e()],2)})),r("div",{staticClass:"col filter-col-btn"},[r("div",{staticClass:"filter-button filter-submit"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v(" Филтрирай ")])]),e.hasActiveFilters?r("div",{staticClass:"filter-button filter-reset"},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resetFilters.apply(null,arguments)}}},[e._v(" Изчисти ")])])]):e._e()])],2):e._e(),r("div",{staticClass:"row mb-4 sort"},[r("span",{staticClass:"col-1 mr-4"},[e._v("Показване: ")]),r("b-select",{staticClass:"col-2 px-3",attrs:{options:e.totalPagesOptions},on:{change:e.setPerPage},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e.hasTableData?r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-icon-left":"","current-page":e.currentPage,"no-sort-reset":"",responsive:"sm"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"sort-changed":e.setSorting},scopedSlots:e._u([{key:"cell()",fn:function(t){return[r("div",{domProps:{innerHTML:e._s(t.value)}})]}},{key:"cell(Actions)",fn:function(t){return e._l(t.item.Actions,(function(t){return r("a",{key:t.key,class:e.btnClass(t.key),staticStyle:{margin:"0 1px"},attrs:{href:t.url},domProps:{innerHTML:e._s(e.btnIconClass(t.key))}})}))}}],null,!1,3972025412)}),r("b-pagination-nav",{staticClass:"my-0",attrs:{"number-of-pages":e.totalPages,"base-url":"#","prev-text":"Предишна","next-text":"Следваща",size:"sm"},on:{change:e.setPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()])},g=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"show-pass",attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-eye-slash"})])}],h=r(6198),y=r(4479),P=r(3796),x=r(4367),w=(r(8975),r(7941),r(1249),r(9254),r(2222),r(9653),{initCurrentPage:1,initPerPage:5}),k={name:"App",data:function(){return{initFilterData:{},tableData:{},filterData:{},totalPages:null,perPage:w.initPerPage,currentPage:w.initCurrentPage,rows:null,totalPagesOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:15,text:"15"},{value:20,text:"20"}],requestedFilters:!1}},computed:{hasTableData:function(){return 0!==Object.keys(this.tableData).length},hasFilterData:function(){return 0!==this.tableData.length},hasActiveFilters:function(){return!this.$lodash.isEqual(this.filterData,this.initFilterData)},isPerPageInit:function(){return this.perPage==w.initPerPage},isCurrentPageInit:function(){return this.currentPage==w.initCurrentPage},fields:function(){return 0!==this.tableData.length?this.tableData.columns:[]},items:function(){if(0!==this.tableData.length){var e=this.tableData.rows.map((function(e){return(0,x.Z)({objectId:e.objectId},function(){var t=e.cells.map((function(e){var t;return"actions"!==e.key?(t={},(0,P.Z)(t,e.key,e.text),(0,P.Z)(t,e.link,e.href),t):{Actions:e.actions}}));return Object.assign.apply(Object,[{}].concat((0,y.Z)(t)))}())}));return e}return[]},query:function(){return this.$lodash.pickBy({currentPage:Number(this.currentPage),perPage:Number(this.perPage)})}},watch:{"$route.query":{handler:function(e,t){this.currentPage=Number(e.currentPage||w.initCurrentPage),this.perPage=Number(e.perPage||w.initPerPage),this.$lodash.isEqual(e,t)||this.submitForm()},deep:!0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return(0,h.Z)(regeneratorRuntime.mark((function t(){var r,a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get(window.jsonData.jsonUrlFilter);case 3:if(r=t.sent,a=r.data,e.filterData=a,e.initFilterData=e.$lodash.cloneDeep(e.filterData),console.log("filterData",e.filterData),e.$lodash.isEmpty(e.$route.query)){t.next=14;break}e.currentPage=Number(e.$route.query.currentPage||w.initCurrentPage),e.perPage=Number(e.$route.query.perPage||w.initPerPage),e.submitForm(),t.next=24;break;case 14:return n=window.jsonData,t.next=17,e.axios.get(n.jsonUrlTable);case 17:i=t.sent,s=i.data,e.tableData=s,e.totalPages=s.totalPages,e.currentPage=Number(e.$route.query.currentPage||s.currentPage),e.perPage=Number(e.$route.query.perPage||s.numberOfRowsPerPage),e.rows=s.rows.length;case 24:t.next=29;break;case 26:t.prev=26,t.t0=t["catch"](0),console.error("Error loading filter data and table data","\n",t.t0);case 29:case"end":return t.stop()}}),t,null,[[0,26]])})))()},submitForm:function(){var e=this;return(0,h.Z)(regeneratorRuntime.mark((function t(){var r,a,n,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={currentPage:Number(e.currentPage),numberOfRowsPerPage:Number(e.perPage)},a=e.$lodash.cloneDeep(e.filterData).concat(r),console.log("submitted with:",a),e.$lodash.isEmpty(e.filterData)||(e.requestedFilters=!0),n=window.jsonData,t.next=8,e.axios.post(n.jsonUrlTable,a);case 8:i=t.sent,s=i.data,console.log("returned:",s),e.tableData=s,e.totalPages=s.totalPages,e.currentPage=s.currentPage,e.perPage=s.numberOfRowsPerPage,e.rows=s.rows.length,t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](0),console.error("Error submitting filter:","\n",t.t0);case 21:case"end":return t.stop()}}),t,null,[[0,18]])})))()},btnClass:function(e){switch(e){case"view":return"btn btn-success";case"history":return"btn btn-info";case"edit":return"btn btn-warning ";case"delete":return"btn btn-danger";case"rights":return"btn btn-rights"}},btnIconClass:function(e){switch(e){case"view":return"mdi mdi-eye-outline";case"history":return"mdi mdi-progress-clock";case"edit":return"Преглед";case"delete":return"dripicons-trash";case"rights":return"mdi mdi-key-outline"}},filterColClass:function(e){return"col-md-".concat(e)},setQuery:function(){this.$router.push({query:this.query}).catch((function(){}))},setPage:function(e){this.currentPage=Number(e),this.setQuery()},setPerPage:function(e){this.perPage=Number(e),this.setQuery()},resetFilters:function(){!0===this.requestedFilters&&this.submitForm(),this.filterData=this.$lodash.cloneDeep(this.initFilterData),this.requestedFilters=!1}}},D=k,_=r(1001),q=(0,_.Z)(D,v,g,!1,null,null,null),C=q.exports,$=(r(44),r(2809));a["default"].use($.Z);var O=[],j=new $.Z({mode:"history",routes:O}),F=j;a["default"].use(c.Z,u()),a["default"].use(i(),{name:"$lodash",lodash:l()}),a["default"].use(d.Datetime),a["default"].use(m.XG7),a["default"].use(p.A7),a["default"].component("datetime",d.Datetime),a["default"].component("Multiselect",b()),a["default"].config.productionTip=!1,new a["default"]({router:F,render:function(e){return e(C)}}).$mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,a,n,i){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],i=e[c][2];for(var l=!0,o=0;o<a.length;o++)(!1&i||s>=i)&&Object.keys(r.O).every((function(e){return r.O[e](a[o])}))?a.splice(o--,1):(l=!1,i<s&&(s=i));if(l){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,n,i]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,i,s=a[0],l=a[1],o=a[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(o)var c=o(r)}for(t&&t(a);u<s.length;u++)i=s[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},a=self["webpackChunkapp_table"]=self["webpackChunkapp_table"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(9247)}));a=r.O(a)})();
//# sourceMappingURL=app-legacy.js.map