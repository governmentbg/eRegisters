(function(){"use strict";var e={9247:function(e,t,a){var r=a(8935),s=a(9018),i=a.n(s),n=a(2196),l=a.n(n),o=a(6166),u=a.n(o),c=a(9483),d=a(5011),m=a(8262),p=a(3266),f=a(6016),b=a.n(f),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.hasFilterData?a("div",{staticClass:"row mb-4 filter"},[e._l(e.filterData,(function(t){return a("div",{key:t.name,staticClass:"col"},["checkbox"!==t.type?a("label",{staticClass:"form-label",attrs:{for:t.name}},[e._v(" "+e._s(t.label)+" ")]):e._e(),"password"===t.type?[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control input-password",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0,!0)]:e._e(),"number"===t.type?[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,min:t.min,max:t.max,step:t.step,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"date"===t.type?[a("datetime",{attrs:{format:"dd MMM yyyy","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(a){e.$set(t,"value","string"===typeof a?a.trim():a)},expression:"filter.value"}})]:e._e(),"datetime"===t.type?[a("datetime",{attrs:{format:"dd MMM yyyy HH:mm a","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(a){e.$set(t,"value","string"===typeof a?a.trim():a)},expression:"filter.value"}})]:e._e(),"paragraph"===t.type?[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,readOnly:"true",required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"text"===t.type?["checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(a){var r=t.value,s=a.target,i=!!s.checked;if(Array.isArray(r)){var n=null,l=e._i(r,n);s.checked?l<0&&e.$set(t,"value",r.concat([n])):l>-1&&e.$set(t,"value",r.slice(0,l).concat(r.slice(l+1)))}else e.$set(t,"value",i)}}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(a){return e.$set(t,"value",null)}}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:t.type},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]:e._e(),"textarea"===t.type?[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,rows:t.rows,cols:t.cols,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]:e._e(),"checkbox"===t.type?[a("b-form-checkbox",{attrs:{id:t.name,name:t.name,disabled:!t.enabled},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"filter.value"}},[e._v(" "+e._s(t.label)+" ")])]:e._e(),"select"===t.type?[a("multiselect",{attrs:{options:t.options,searchable:!0,"show-labels":!0,label:"label","track-by":"label",required:t.required,disabled:!t.enabled},model:{value:t.selectedValue,callback:function(a){e.$set(t,"selectedValue","string"===typeof a?a.trim():a)},expression:"filter.selectedValue"}})]:e._e(),"selectsearch"===t.type?[a("multiselect",{attrs:{options:t.options,label:"label","track-by":"label","preserve-search":!0,"reset-after":!1,"group-values":"groupOptions","group-label":"label",required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(a){e.$set(t,"value","string"===typeof a?a.trim():a)},expression:"filter.value"}})]:e._e(),"multiselect"===t.type?[a("multiselect",{attrs:{options:t.options,multiple:!0,"close-on-select":!1,"preserve-search":!0,label:"label","track-by":"label","reset-after":!1,"group-values":"groupOptions","group-label":"label","group-select":!0,"hide-selected":!0,required:t.required,disabled:!t.enabled},model:{value:t.selectedValues,callback:function(a){e.$set(t,"selectedValues",a)},expression:"filter.selectedValues"}})]:e._e()],2)})),a("div",{staticClass:"col filter-col-btn"},[a("div",{staticClass:"filter-button filter-submit"},[a("label",{staticClass:"form-label"},[e._v("   ")]),a("button",{staticClass:"form-control btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v(" Филтрирай ")])]),e.hasActiveFilters?a("div",{staticClass:"filter-button filter-reset"},[a("div",{staticClass:"mb-3"},[a("label",{staticClass:"form-label"},[e._v("   ")]),a("button",{staticClass:"form-control btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resetFilters.apply(null,arguments)}}},[e._v(" Изчисти ")])])]):e._e()])],2):e._e(),a("div",{staticClass:"row mb-4 sort"},[a("span",{staticClass:"col-1 mr-4"},[e._v("Показване: ")]),a("b-select",{staticClass:"col-2 px-3",attrs:{options:e.totalPagesOptions},on:{change:e.setPerPage},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e.hasTableData?a("div",[a("b-table",{attrs:{items:e.items,fields:e.fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-icon-left":"","current-page":e.currentPage,"no-sort-reset":"",responsive:"sm"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"sort-changed":e.setSorting},scopedSlots:e._u([{key:"cell()",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.value)}})]}},{key:"cell(Actions)",fn:function(t){return e._l(t.item.Actions,(function(t){return a("a",{key:t.key,class:e.btnClass(t.key),staticStyle:{margin:"0 1px"},attrs:{href:t.url},domProps:{innerHTML:e._s(e.btnIconClass(t.key))}})}))}}],null,!1,3972025412)}),a("b-pagination-nav",{staticClass:"my-0",attrs:{"number-of-pages":e.totalPages,"base-url":"#","prev-text":"Предишна","next-text":"Следваща",size:"sm"},on:{change:e.setPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()])},v=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{staticClass:"show-pass",attrs:{href:"javascript:void(0)"}},[a("i",{staticClass:"fa fa-eye-slash"})])}];const g={initCurrentPage:1,initPerPage:5};var y={name:"App",data(){return{initFilterData:{},tableData:{},filterData:{},totalPages:null,perPage:g.initPerPage,currentPage:g.initCurrentPage,rows:null,totalPagesOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:15,text:"15"},{value:20,text:"20"}],requestedFilters:!1}},computed:{hasTableData(){return 0!==Object.keys(this.tableData).length},hasFilterData(){return 0!==this.tableData.length},hasActiveFilters(){return!this.$lodash.isEqual(this.filterData,this.initFilterData)},isPerPageInit(){return this.perPage==g.initPerPage},isCurrentPageInit(){return this.currentPage==g.initCurrentPage},fields(){return 0!==this.tableData.length?this.tableData.columns:[]},items(){if(0!==this.tableData.length){const e=this.tableData.rows.map((e=>({objectId:e.objectId,...(()=>{const t=e.cells.map((e=>"actions"!==e.key?{[e.key]:e.text,[e.link]:e.href}:{Actions:e.actions}));return Object.assign({},...t)})()})));return e}return[]},query(){return this.$lodash.pickBy({currentPage:Number(this.currentPage),perPage:Number(this.perPage)})}},watch:{"$route.query":{handler(e,t){this.currentPage=Number(e.currentPage||g.initCurrentPage),this.perPage=Number(e.perPage||g.initPerPage),this.$lodash.isEqual(e,t)||this.submitForm()},deep:!0}},mounted(){this.getData()},methods:{async getData(){try{const{data:e}=await this.axios.get(window.jsonData.jsonUrlFilter);if(this.filterData=e,this.initFilterData=this.$lodash.cloneDeep(this.filterData),console.log("filterData",this.filterData),this.$lodash.isEmpty(this.$route.query)){const e=window.jsonData,{data:t}=await this.axios.get(e.jsonUrlTable);this.tableData=t,this.totalPages=t.totalPages,this.currentPage=Number(this.$route.query.currentPage||t.currentPage),this.perPage=Number(this.$route.query.perPage||t.numberOfRowsPerPage),this.rows=t.rows.length}else this.currentPage=Number(this.$route.query.currentPage||g.initCurrentPage),this.perPage=Number(this.$route.query.perPage||g.initPerPage),this.submitForm()}catch(e){console.error("Error loading filter data and table data","\n",e)}},async submitForm(){try{const e={currentPage:Number(this.currentPage),numberOfRowsPerPage:Number(this.perPage)},t=this.$lodash.cloneDeep(this.filterData).concat(e);console.log("submitted with:",t),this.$lodash.isEmpty(this.filterData)||(this.requestedFilters=!0);const a=window.jsonData,{data:r}=await this.axios.post(a.jsonUrlTable,t);console.log("returned:",r),this.tableData=r,this.totalPages=r.totalPages,this.currentPage=r.currentPage,this.perPage=r.numberOfRowsPerPage,this.rows=r.rows.length}catch(e){console.error("Error submitting filter:","\n",e)}},btnClass(e){switch(e){case"view":return"btn btn-success";case"history":return"btn btn-info";case"edit":return"btn btn-warning ";case"delete":return"btn btn-danger";case"rights":return"btn btn-rights"}},btnIconClass(e){switch(e){case"view":return"mdi mdi-eye-outline";case"history":return"mdi mdi-progress-clock";case"edit":return"Преглед";case"delete":return"dripicons-trash";case"rights":return"mdi mdi-key-outline"}},filterColClass(e){return`col-md-${e}`},setQuery(){this.$router.push({query:this.query}).catch((()=>{}))},setPage(e){this.currentPage=Number(e),this.setQuery()},setPerPage(e){this.perPage=Number(e),this.setQuery()},resetFilters(){!0===this.requestedFilters&&this.submitForm(),this.filterData=this.$lodash.cloneDeep(this.initFilterData),this.requestedFilters=!1}}},P=y,w=a(1001),x=(0,w.Z)(P,h,v,!1,null,null,null),D=x.exports,_=(a(44),a(2809));r["default"].use(_.Z);const k=[],q=new _.Z({mode:"history",routes:k});var C=q;r["default"].use(c.Z,u()),r["default"].use(i(),{name:"$lodash",lodash:l()}),r["default"].use(d.Datetime),r["default"].use(m.XG7),r["default"].use(p.A7),r["default"].component("datetime",d.Datetime),r["default"].component("Multiselect",b()),r["default"].config.productionTip=!1,new r["default"]({router:C,render:e=>e(D)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,s,i){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],s=e[c][1],i=e[c][2];for(var l=!0,o=0;o<r.length;o++)(!1&i||n>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[o])}))?r.splice(o--,1):(l=!1,i<n&&(n=i));if(l){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,n=r[0],l=r[1],o=r[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(o)var c=o(a)}for(t&&t(r);u<n.length;u++)i=n[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(c)},r=self["webpackChunkapp_table"]=self["webpackChunkapp_table"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(9247)}));r=a.O(r)})();
//# sourceMappingURL=app.js.map