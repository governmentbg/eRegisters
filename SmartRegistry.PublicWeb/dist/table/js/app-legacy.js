(function(){"use strict";var e={2824:function(e,t,r){r(6992),r(8674),r(9601),r(7727);var a=r(8935),n=r(9018),s=r.n(n),i=r(2196),o=r.n(i),u=r(6166),l=r.n(u),c=r(6762),d=r(8262),m=r(3266),p=r(6016),f=r.n(p),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e.hasFilterData?r("div",{staticClass:"row mb-4 filter"},[e._l(e.filterData,(function(t){return r("div",{key:t.name,staticClass:"col-md"},[r("label",{staticClass:"form-label",attrs:{for:t.name}},[e._v(" "+e._s(t.label)+" ")]),"password"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control input-password",attrs:{id:t.name,type:t.type,required:t.required,name:t.name},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0,!0)]:e._e(),"date"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],attrs:{id:t.name,type:t.type,required:t.required,name:t.name},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"datetime"===t.type?[r("datetime",{attrs:{type:t.type,"input-class":"form-control","input-id":t.name,format:"MM/dd/yyyy HH:MM a",autocomplete:"off"},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"paragraph"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,required:t.required,readOnly:"true",name:t.name},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"text"===t.type?["checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,required:t.required,name:t.name,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(r){var a=t.value,n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(t,"value",a.concat([i])):o>-1&&e.$set(t,"value",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(t,"value",s)}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,required:t.required,name:t.name,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(r){return e.$set(t,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,required:t.required,name:t.name,type:t.type},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"textarea"===t.type?[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,required:t.required,name:t.name},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"select"===t.type?[r("multiselect",{attrs:{options:t.options,searchable:!1,"show-labels":!1,label:"label","track-by":"label"},model:{value:t.selectedValue,callback:function(r){e.$set(t,"selectedValue",r)},expression:"filter.selectedValue"}})]:e._e(),"selectsearch"===t.type?[r("multiselect",{attrs:{options:t.options,"custom-label":e.nameWithLang,label:"label","track-by":"label"},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}})]:e._e(),"multiselect"===t.type?[r("multiselect",{attrs:{options:t.options,multiple:!0,"close-on-select":!1,"preserve-search":!0,label:"label","track-by":"label","reset-after":!1,"group-values":"groupOptions","group-label":"groupLabel","group-select":!0,"hide-selected":!0},model:{value:t.selectedValues,callback:function(r){e.$set(t,"selectedValues",r)},expression:"filter.selectedValues"}})]:e._e()],2)})),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}}},[e._v(" Филтрирай ")])])]),e.hasActiveFilters?r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resetFilters.apply(null,arguments)}}},[e._v(" Изчисти ")])])]):e._e()],2):e._e(),r("div",{staticClass:"row mb-4 sort"},[r("span",{staticClass:"col-1 mr-4"},[e._v("Показване: ")]),r("b-select",{staticClass:"col-2 px-3",attrs:{options:e.totalPagesOptions},on:{change:e.setPerPage},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e.hasTableData?r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-icon-left":"","current-page":e.currentPage,"no-sort-reset":"",responsive:"sm"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"sort-changed":e.setSorting},scopedSlots:e._u([{key:"cell()",fn:function(t){return[r("div",{domProps:{innerHTML:e._s(t.value)}})]}},{key:"cell(Actions)",fn:function(t){return e._l(t.item.Actions,(function(t){return r("a",{key:t.key,class:e.btnClass(t.key),staticStyle:{margin:"0 1px"},attrs:{href:t.url}},[r("i",{class:e.btnIconClass(t.key)})])}))}}],null,!1,3432983400)}),r("b-pagination-nav",{staticClass:"my-0",attrs:{"number-of-pages":e.totalPages,"base-url":"#","prev-text":"Предишна","next-text":"Следваща",size:"sm"},on:{change:e.setPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()])},b=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"show-pass",attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-eye-slash"})])}],g=r(6198),y=r(4479),h=r(3796),P=r(4367),D=(r(8975),r(7941),r(1249),r(2222),r(9653),r(2707),r(7327),r(1539),{initCurrentPage:1,initPerPage:5,initSortBy:null,initSortDesc:!1}),w={name:"App",data:function(){return{initFilterData:{},tableData:{},filterData:{},tableDataColumns:[],sortBy:D.initSortBy,sortDesc:D.initSortDesc,totalPages:null,perPage:D.initPerPage,currentPage:D.initCurrentPage,rows:null,totalPagesOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:15,text:"15"},{value:20,text:"20"}],requestedFilters:!1}},computed:{hasTableData:function(){return 0!==Object.keys(this.tableData).length},hasFilterData:function(){return 0!==this.tableData.length},hasActiveFilters:function(){return!this.$lodash.isEqual(this.filterData,this.initFilterData)},isPerPageInit:function(){return this.perPage==D.initPerPage},isCurrentPageInit:function(){return this.currentPage==D.initCurrentPage},isSortByInit:function(){return this.sortBy==D.initSortBy},isSortDescInit:function(){return this.sortDesc==D.initSortDesc},fields:function(){return 0!==this.tableData.length?this.tableData.columns:[]},items:function(){if(0!==this.tableData.length){var e=this.tableData.rows.map((function(e){return(0,P.Z)({objectId:e.objectId},function(){var t=e.cells.map((function(e){return"actions"!==e.key?(0,h.Z)({},e.key,e.text):{Actions:e.actions}}));return Object.assign.apply(Object,[{}].concat((0,y.Z)(t)))}())}));return e}return[]},query:function(){return this.$lodash.pickBy({currentPage:Number(this.currentPage),perPage:Number(this.perPage),sortBy:this.isSortByInit?null:this.sortBy,sort:this.isSortByInit?null:!0===this.sortDesc?"desc":"asc"})}},watch:{"$route.query":{handler:function(e,t){this.currentPage=Number(e.currentPage||D.initCurrentPage),this.perPage=Number(e.perPage||D.initPerPage),this.sortBy=e.sortBy||D.initSortBy,this.sortDesc="desc"===e.sort||D.initSortDesc,this.$lodash.isEqual(e,t)||this.submitForm()},deep:!0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get(window.jsonData.jsonUrlFilter);case 3:if(r=t.sent,a=r.data,e.filterData=a,e.initFilterData=e.$lodash.cloneDeep(e.filterData),e.$lodash.isEmpty(e.$route.query)){t.next=15;break}e.currentPage=Number(e.$route.query.currentPage||D.initCurrentPage),e.perPage=Number(e.$route.query.perPage||D.initPerPage),e.sortBy=e.$route.query.sortBy||D.initSortBy,e.sortDesc="desc"===e.$route.query.sort||D.initSortDesc,e.submitForm(),t.next=28;break;case 15:return n=window.jsonData,t.next=18,e.axios.get(n.jsonUrlTable);case 18:s=t.sent,i=s.data,e.tableData=i,e.tableDataColumns=i.columns.filter((function(e){return!0===e.sortable})).map((function(e){return e.key})),e.totalPages=i.totalPages,e.currentPage=Number(e.$route.query.currentPage||i.currentPage),e.perPage=Number(e.$route.query.perPage||i.numberOfRowsPerPage),e.rows=i.rows.length,e.sortBy=e.$route.query.sortBy||i.orderColumn,e.sortDesc="desc"===e.$route.query.sort||"desc"===i.orderDirection;case 28:t.next=33;break;case 30:t.prev=30,t.t0=t["catch"](0),console.error("Error loading filter data and table data","\n",t.t0);case 33:case"end":return t.stop()}}),t,null,[[0,30]])})))()},submitForm:function(){var e=this;return(0,g.Z)(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r={currentPage:Number(e.currentPage),numberOfRowsPerPage:Number(e.perPage),orderColumn:e.$lodash.isEmpty(e.$route.query.sortBy)?e.sortBy:e.$route.query.sortBy,orderDirection:e.$lodash.isEmpty(e.$route.query.sortBy)?null:e.$lodash.isEmpty(e.$route.query.sort)?"asc":e.$route.query.sort},a=e.$lodash.cloneDeep(e.filterData).concat(r),console.log("submitted with:",a),e.$lodash.isEmpty(e.filterData)||(e.requestedFilters=!0),n=window.jsonData,t.next=8,e.axios.post(n.jsonUrlTable,a);case 8:s=t.sent,i=s.data,console.log("returned:",i),e.tableData=i,e.tableDataColumns=i.columns.filter((function(e){return!0===e.sortable})).map((function(e){return e.key})),e.totalPages=i.totalPages,e.currentPage=i.currentPage,e.perPage=i.numberOfRowsPerPage,e.rows=i.rows.length,e.sortBy=i.orderColumn||null,e.sortDesc=null!=i.orderDirection?"desc"===i.orderDirection:null,t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](0),console.error("Error submitting filter:","\n",t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},btnClass:function(e){switch(e){case"view":return"btn btn-success";case"history":return"btn btn-info";case"edit":return"btn btn-warning ";case"delete":return"btn btn-danger";case"rights":return"btn btn-rights"}},btnIconClass:function(e){switch(e){case"view":return"mdi mdi-eye-outline";case"history":return"mdi mdi-progress-clock";case"edit":return"dripicons-pencil";case"delete":return"dripicons-trash";case"rights":return"mdi mdi-key-outline"}},filterColClass:function(e){return"col-md-".concat(e)},setQuery:function(){this.$router.push({query:this.query}).catch((function(){}))},setPage:function(e){this.currentPage=Number(e),this.setQuery()},setPerPage:function(e){this.perPage=Number(e),this.setQuery()},setSorting:function(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.setQuery()},resetFilters:function(){!0===this.requestedFilters&&this.submitForm(),this.filterData=this.$lodash.cloneDeep(this.initFilterData),this.requestedFilters=!1}}},x=w,$=r(1001),k=(0,$.Z)(x,v,b,!1,null,null,null),C=k.exports,q=(r(44),r(2809));a["default"].use(q.Z);var _=[],B=new q.Z({mode:"history",routes:_}),O=B;a["default"].use(c.Z,l()),a["default"].use(s(),{name:"$lodash",lodash:o()}),a["default"].use(d.XG7),a["default"].use(m.A7),a["default"].component("Multiselect",f()),a["default"].config.productionTip=!1,new a["default"]({router:O,render:function(e){return e(C)}}).$mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,a,n,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,u=0;u<a.length;u++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](a[u])}))?a.splice(u--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var l=n();void 0!==l&&(t=l)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,i=a[0],o=a[1],u=a[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(u)var c=u(r)}for(t&&t(a);l<i.length;l++)s=i[l],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},a=self["webpackChunkapp_table"]=self["webpackChunkapp_table"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(2824)}));a=r.O(a)})();
//# sourceMappingURL=app-legacy.js.map