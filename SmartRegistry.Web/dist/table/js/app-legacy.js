(function(){"use strict";var e={340:function(e,t,r){r(6992),r(8674),r(9601),r(7727);var a=r(8935),n=r(9018),s=r.n(n),i=r(2196),o=r.n(i),l=r(6166),u=r.n(l),c=r(6762),d=r(5011),m=r(8262),f=r(3266),p=r(6016),b=r.n(p),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("form",{staticClass:"form"},[r("button",{staticStyle:{display:"none"},on:{click:function(t){return t.preventDefault(),e.submitForm({filter:!0})}}}),e.hasFilterData?r("div",[r("div",{staticClass:"row mb-4 filter"},[e._l(e.filterData,(function(t){return r("div",{key:t.name,class:"col-"+t.col},["checkbox"!==t.type?r("label",{staticClass:"form-label",attrs:{for:t.name}},[e._v(" "+e._s(t.label)+" ")]):e._e(),"password"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control input-password",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._m(0,!0)]:e._e(),"number"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,min:t.min,max:t.max,step:t.step,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"date"===t.type?[r("datetime",{attrs:{format:"dd MMM yyyy","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,"value-zone":"Europe/Sofia",autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"datetime"===t.type?[r("datetime",{attrs:{format:"dd MMM yyyy HH:mm a","input-class":"form-control",type:t.type,name:t.name,title:t.label,"input-id":t.name,"value-zone":"Europe/Sofia",autocomplete:"off",auto:!0,required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"paragraph"===t.type?[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"filter.value",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,readOnly:"true",required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]:e._e(),"text"===t.type?["checkbox"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:function(r){var a=t.value,n=r.target,s=!!n.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);n.checked?o<0&&e.$set(t,"value",a.concat([i])):o>-1&&e.$set(t,"value",a.slice(0,o).concat(a.slice(o+1)))}else e.$set(t,"value",s)}}}):"radio"===t.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:function(r){return e.$set(t,"value",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,name:t.name,title:t.label,required:t.required,disabled:!t.enabled,type:t.type},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"textarea"===t.type?[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"filter.value"}],staticClass:"form-control",attrs:{id:t.name,type:t.type,name:t.name,title:t.label,rows:t.rows,cols:t.cols,required:t.required,disabled:!t.enabled},domProps:{value:t.value},on:{input:function(r){r.target.composing||e.$set(t,"value",r.target.value)}}})]:e._e(),"checkbox"===t.type?[r("b-form-checkbox",{attrs:{id:t.name,name:t.name,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"filter.value"}},[e._v(" "+e._s(t.label)+" ")])]:e._e(),"select"===t.type?[r("multiselect",{attrs:{options:t.options,searchable:!0,"show-labels":!0,label:"label","track-by":"label",required:t.required,disabled:!t.enabled},model:{value:t.selectedValue,callback:function(r){e.$set(t,"selectedValue","string"===typeof r?r.trim():r)},expression:"filter.selectedValue"}})]:e._e(),"selectsearch"===t.type?[r("multiselect",{attrs:{options:t.options,label:"label","track-by":"label","preserve-search":!0,"reset-after":!1,"group-values":"groupOptions","group-label":"label",required:t.required,disabled:!t.enabled},model:{value:t.value,callback:function(r){e.$set(t,"value","string"===typeof r?r.trim():r)},expression:"filter.value"}})]:e._e(),"multiselect"===t.type?[r("multiselect",{attrs:{options:t.options,multiple:!0,"close-on-select":!1,"preserve-search":!0,label:"label","track-by":"label","reset-after":!1,"group-values":"groupOptions","group-label":"label","group-select":!0,"hide-selected":!0,required:t.required,disabled:!t.enabled},model:{value:t.selectedValues,callback:function(r){e.$set(t,"selectedValues",r)},expression:"filter.selectedValues"}})]:e._e()],2)})),r("div",{staticClass:"col-md-2"},[r("div",{staticClass:"mb-3"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-primary",attrs:{type:"submit"},on:{click:function(t){return t.preventDefault(),e.submitForm({filter:!0})}}},[e._v(" Филтрирай ")])])]),e.hasActiveFilters?r("div",{staticClass:"col-md-2 mb-3"},[r("label",{staticClass:"form-label"},[e._v("   ")]),r("button",{staticClass:"form-control btn btn-danger",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.resetFilters.apply(null,arguments)}}},[e._v(" Изчисти ")])]):e._e()],2)]):e._e()]),r("div",{staticClass:"row mb-4 sort"},[r("span",{staticClass:"col-1 mr-4"},[e._v("Показване: ")]),r("b-select",{staticClass:"col-2 px-3",attrs:{options:e.totalPagesOptions},on:{change:e.setPerPage},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}})],1),e.hasTableData?r("div",[r("b-table",{attrs:{items:e.items,fields:e.fields,"sort-by":e.sortBy,"sort-desc":e.sortDesc,"sort-icon-left":"","current-page":e.currentPage,"no-sort-reset":"",responsive:"sm"},on:{"update:sortBy":function(t){e.sortBy=t},"update:sort-by":function(t){e.sortBy=t},"update:sortDesc":function(t){e.sortDesc=t},"update:sort-desc":function(t){e.sortDesc=t},"sort-changed":e.setSorting},scopedSlots:e._u([{key:"cell()",fn:function(t){return[r("div",{domProps:{innerHTML:e._s(t.value)}})]}},{key:"cell(Actions)",fn:function(t){return e._l(t.item.Actions,(function(t){return r("a",{key:t.key,class:e.btnClass(t.key),staticStyle:{margin:"0 1px"},attrs:{href:t.url,"data-toggle":"tooltip","data-placement":"top",title:t.name}},[r("i",{class:e.btnIconClass(t.key)})])}))}}],null,!1,1999501356)}),r("b-pagination-nav",{staticClass:"my-0",attrs:{"number-of-pages":e.totalPages,"base-url":"#","prev-text":"Предишна","next-text":"Следваща",size:"sm"},on:{change:e.setPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1):e._e()])},g=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a",{staticClass:"show-pass",attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-eye-slash"})])}],y=r(6198),h=r(4479),P=r(3796),D=r(4367),w=(r(8975),r(7941),r(1249),r(2222),r(9653),r(2707),r(7327),r(1539),{initCurrentPage:1,initPerPage:5,initSortBy:null,initSortDesc:!1}),x={name:"App",data:function(){return{initFilterData:{},tableData:{},filterData:{},filterDataCopy:{},tableDataColumns:[],sortBy:w.initSortBy,sortDesc:w.initSortDesc,totalPages:null,perPage:w.initPerPage,currentPage:w.initCurrentPage,rows:null,totalPagesOptions:[{value:5,text:"5"},{value:10,text:"10"},{value:15,text:"15"},{value:20,text:"20"}],filtered:!1}},computed:{hasTableData:function(){return 0!==Object.keys(this.tableData).length},hasFilterData:function(){return 0!==this.tableData.length},hasActiveFilters:function(){return!this.$lodash.isEqual(this.filterData,this.initFilterData)},isPerPageInit:function(){return this.perPage==w.initPerPage},isCurrentPageInit:function(){return this.currentPage==w.initCurrentPage},isSortByInit:function(){return this.sortBy==w.initSortBy},isSortDescInit:function(){return this.sortDesc==w.initSortDesc},fields:function(){return 0!==this.tableData.length?this.tableData.columns:[]},items:function(){if(0!==this.tableData.length){var e=this.tableData.rows.map((function(e){return(0,D.Z)({objectId:e.objectId},function(){var t=e.cells.map((function(e){return"actions"!==e.key?(0,P.Z)({},e.key,e.text):{Actions:e.actions}}));return Object.assign.apply(Object,[{}].concat((0,h.Z)(t)))}())}));return e}return[]},query:function(){return this.$lodash.pickBy({currentPage:this.isCurrentPageInit?null:Number(this.currentPage),perPage:this.isPerPageInit?null:Number(this.perPage),sortBy:this.isSortByInit?null:this.sortBy,sort:this.isSortByInit?null:!0===this.sortDesc?"desc":"asc"})}},watch:{"$route.query":{handler:function(e,t){this.currentPage=Number(e.currentPage||w.initCurrentPage),this.perPage=Number(e.perPage||w.initPerPage),this.sortBy=e.sortBy||w.initSortBy,this.sortDesc="desc"===e.sort||w.initSortDesc,this.$lodash.isEqual(e,t)||(this.filtered?this.submitForm({filter:!0}):this.submitForm())},deep:!0}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;return(0,y.Z)(regeneratorRuntime.mark((function t(){var r,a,n,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.axios.get(window.jsonData.jsonUrlFilter);case 3:if(r=t.sent,a=r.data,e.filterData=a,e.initFilterData=e.$lodash.cloneDeep(a),e.filterDataCopy=e.$lodash.cloneDeep(e.filterData),console.log("filterData",e.filterData),e.$lodash.isEmpty(e.$route.query)){t.next=17;break}e.currentPage=Number(e.$route.query.currentPage||w.initCurrentPage),e.perPage=Number(e.$route.query.perPage||w.initPerPage),e.sortBy=e.$route.query.sortBy||w.initSortBy,e.sortDesc="desc"===e.$route.query.sort||w.initSortDesc,e.submitForm(),t.next=30;break;case 17:return n=window.jsonData,t.next=20,e.axios.get(n.jsonUrlTable);case 20:s=t.sent,i=s.data,e.tableData=i,e.tableDataColumns=i.columns.filter((function(e){return!0===e.sortable})).map((function(e){return e.key})),e.totalPages=i.totalPages,e.currentPage=Number(e.$route.query.currentPage||i.currentPage),e.perPage=Number(e.$route.query.perPage||i.numberOfRowsPerPage),e.rows=i.rows.length,e.sortBy=e.$route.query.sortBy||i.orderColumn,e.sortDesc="desc"===e.$route.query.sort||"desc"===i.orderDirection;case 30:t.next=35;break;case 32:t.prev=32,t.t0=t["catch"](0),console.error("Error loading filter data and table data","\n",t.t0);case 35:case"end":return t.stop()}}),t,null,[[0,32]])})))()},submitForm:function(){var e=arguments,t=this;return(0,y.Z)(regeneratorRuntime.mark((function r(){var a,n,s,i,o,l,u,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:{},n=a.filter,s=void 0!==n&&n,r.prev=1,i={currentPage:Number(t.currentPage),numberOfRowsPerPage:Number(t.perPage),orderColumn:t.$lodash.isEmpty(t.$route.query.sortBy)?null:t.$route.query.sortBy,orderDirection:t.$lodash.isEmpty(t.$route.query.sortBy)?null:t.$lodash.isEmpty(t.$route.query.sort)?"asc":t.$route.query.sort},o=[],s?(i.currentPage=w.initCurrentPage,o=t.$lodash.cloneDeep(t.filterData).concat(i),t.filterDataCopy=t.$lodash.cloneDeep(t.filterData),t.currentPage=w.initCurrentPage):o=t.$lodash.cloneDeep(t.filterDataCopy).concat(i),console.log("submitted with:",o),l=window.jsonData,r.next=9,t.axios.post(l.jsonUrlTable,o);case 9:u=r.sent,c=u.data,t.filtered=!1,console.log("returned:",c),t.tableData=c,t.tableDataColumns=c.columns.filter((function(e){return!0===e.sortable})).map((function(e){return e.key})),t.totalPages=c.totalPages,t.currentPage=c.currentPage,t.perPage=c.numberOfRowsPerPage,t.rows=c.rows.length,t.sortBy=c.orderColumn||null,t.sortDesc=null!=c.orderDirection?"desc"===c.orderDirection:null,r.next=26;break;case 23:r.prev=23,r.t0=r["catch"](1),console.error("Error submitting filter:","\n",r.t0);case 26:case"end":return r.stop()}}),r,null,[[1,23]])})))()},btnClass:function(e){switch(e){case"view":return"btn btn-success";case"history":return"btn btn-info";case"edit":return"btn btn-warning ";case"delete":return"btn btn-danger";case"rights":return"btn btn-rights";case"resetPassword":return"btn btn-reset-password";case"stateTransition":return"btn btn-rights";case"registerState":return"btn btn-info";case"webService":return"btn btn-success"}},btnIconClass:function(e){switch(e){case"view":return"mdi mdi-eye-outline";case"history":return"mdi mdi-progress-clock";case"edit":return"dripicons-pencil";case"delete":return"dripicons-trash";case"rights":return"mdi mdi-key-outline";case"resetPassword":return"mdi mdi-lock-reset";case"registerState":return"dripicons-checklist";case"stateTransition":return"dripicons-media-shuffle";case"webService":return"dripicons-web"}},filterColClass:function(e){return"col-md-".concat(e)},setQuery:function(){this.$router.push({query:this.query}).catch((function(){}))},setPage:function(e){this.currentPage=Number(e),this.setQuery()},setPerPage:function(e){this.perPage=Number(e),this.setQuery()},setSorting:function(e){this.sortBy=e.sortBy,this.sortDesc=e.sortDesc,this.setQuery()},resetFilters:function(){this.currentPage=w.initCurrentPage,this.filterData=this.$lodash.cloneDeep(this.initFilterData),this.filtered=!0,this.setQuery()}}},k=x,C=r(1001),$=(0,C.Z)(k,v,g,!1,null,null,null),q=$.exports,_=(r(44),r(2809));a["default"].use(_.Z);var S=[],B=new _.Z({mode:"history",routes:S}),O=B;a["default"].use(c.Z,u()),a["default"].use(s(),{name:"$lodash",lodash:o()}),a["default"].use(d.Datetime),a["default"].use(m.XG7),a["default"].use(f.A7),a["default"].component("datetime",d.Datetime),a["default"].component("Multiselect",b()),a["default"].config.productionTip=!1,new a["default"]({router:O,render:function(e){return e(q)}}).$mount("#app")}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.m=e,function(){r.amdO={}}(),function(){var e=[];r.O=function(t,a,n,s){if(!a){var i=1/0;for(c=0;c<e.length;c++){a=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,l=0;l<a.length;l++)(!1&s||i>=s)&&Object.keys(r.O).every((function(e){return r.O[e](a[l])}))?a.splice(l--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,n,s]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};r.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,s,i=a[0],o=a[1],l=a[2],u=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(l)var c=l(r)}for(t&&t(a);u<i.length;u++)s=i[u],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},a=self["webpackChunktable"]=self["webpackChunktable"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=r.O(void 0,[998],(function(){return r(340)}));a=r.O(a)})();
//# sourceMappingURL=app-legacy.js.map